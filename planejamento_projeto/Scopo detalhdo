apostacerta.AI - Documento de Escopo do Projeto - Vers√£o 1.1 (Atualizado)
Data de Elabora√ß√£o: 31 de maio de 2025

1. Vis√£o Geral
Nome do Projeto: apostacerta.AI - Vers√£o 1.1
Resumo do Projeto: Desenvolvimento de um chatbot via WhatsApp, utilizando n8n como orquestrador, Evolution API para comunica√ß√£o, Supabase para persist√™ncia de dados, e Intelig√™ncia Artificial (Google Gemini ou OpenAI ChatGPT) para fornecer an√°lises e recomenda√ß√µes de apostas esportivas (futebol). A vers√£o 1.1 aprimora o onboarding do usu√°rio com perfis de investimento e c√°lculo de stake personalizado, introduz um agente de controle de perdas, permite o acompanhamento de times favoritos e enriquece a an√°lise de partidas com maior contexto e interatividade.
Data da Vers√£o Anterior (V1): 22 de maio de 2025

2. Objetivo Principal do Projeto (V1.1)
Automatizar e enriquecer a experi√™ncia de apostadores esportivos, fornecendo an√°lises estat√≠sticas e recomenda√ß√µes baseadas em IA diretamente no WhatsApp. Auxiliar na tomada de decis√µes mais informadas, no gerenciamento de banca personalizado (com base em perfis de risco e metas), na disciplina emocional (com alertas de perdas), atrav√©s de uma interface conversacional intuitiva, eficiente e contextualizada.

3. Escopo da Vers√£o Atualizada (V1.1)
3.1. Plataforma de Orquestra√ß√£o:

Desenvolvimento e configura√ß√£o de fluxos na plataforma n8n.

3.2. Interface de Comunica√ß√£o WhatsApp:

Integra√ß√£o e configura√ß√£o com a Evolution API para envio e recebimento de mensagens.

3.3. Banco de Dados (Supabase):

Modelagem e configura√ß√£o de tabelas para armazenar:

Dados do Usu√°rio:

ID do WhatsApp

banca_inicial (Valor)

meta_lucro (Valor)

prazo_meta_dias (Tempo em dias)

perfil_risco (Conservador, Equilibrado, Agressivo)

stake_sugerida (Calculada)

total_apostas_diarias_recomendadas (Calculada)

times_favoritos (Array de strings, ex: ["Corinthians", "Real Madrid"])

contagem_creditos_analise

historico_perdas_consecutivas (Integer)

Hist√≥rico B√°sico:

Log simplificado de intera√ß√µes ou an√°lises solicitadas.

jogos_em_analise_ativa: (Estrutura para armazenar ID do jogo e estado, permitindo retorno sem novo custo de cr√©dito).

historico_apostas_jogo: (Para registrar feedback do usu√°rio sobre apostas feitas em um jogo analisado).

Configura√ß√µes da Aplica√ß√£o (se necess√°rio).

3.4. Fluxo de Onboarding do Usu√°rio:

Mensagem de boas-vindas e apresenta√ß√£o do T√°tica Certa ScoutMind.AI.

Coleta interativa do valor da banca_inicial do usu√°rio (Ex: R$ 1.000).

Coleta interativa da meta_lucro do usu√°rio (Ex: R$ 500).

Coleta interativa do prazo_meta_dias para alcan√ßar a meta (Ex: 10 dias).

Apresenta√ß√£o dos perfis de risco e coleta da escolha do usu√°rio:

Conservador: Stake = 2% da banca. (Ex: Banca R1000,StakeR20. Total de apostas di√°rias sugeridas: 5. Mensagem: "Mais apostas com risco menor por entrada. Ideal para quem preza pela estabilidade.")

Equilibrado: Stake = 5% da banca. (Ex: Banca R1000,StakeR50. Total de apostas di√°rias sugeridas: 3. Mensagem: "Combina ritmo e controle para quem busca consist√™ncia e progresso di√°rio.")

Agressivo: Stake = 10% da banca. (Ex: Banca R1000,StakeR100. Total de apostas di√°rias sugeridas: 1-2. Mensagem: "Poucas apostas por dia com alto risco e potencial de lucro r√°pido. Use com aten√ß√£o! üî¥ Alerta: Essa estrat√©gia pode levar √† perda da sua banca em apenas uma entrada.")

Coleta interativa dos times_favoritos do usu√°rio.

Armazenamento dos dados de onboarding no Supabase.

Apresenta√ß√£o da stake sugerida e total de apostas di√°rias.

3.5. Menu Principal Interativo no WhatsApp:

Apresenta√ß√£o de op√ß√µes claras via bot√µes ou lista.

Op√ß√£o: "üèÜ Ver Jogos das Ligas Principais"

Aviso: "Estes s√£o os jogos em tempo real ou come√ßando em breve."

(lista de ligas a ser definida, ex: Brasileir√£o S√©rie A, Premier League, La Liga, etc.).

Mensagens das ligas com os jogos separados em blocos.

Indica√ß√£o visual (ex: üîÅ) para jogos que o usu√°rio iniciou an√°lise e pode retornar sem custo.

Op√ß√£o: "üîÑ Atualizar Lista de Jogos".

Op√ß√£o: "üìä Meus Dados (Banca/Meta/Perfil/Stake)".

Op√ß√£o: "üí° Como funciona?" (explica√ß√£o breve sobre cr√©ditos/an√°lises).

Op√ß√£o: "‚ù§Ô∏è Meus Times Favoritos" (listar times e talvez pr√≥ximos jogos se houver).

3.6. Sele√ß√£o e An√°lise de Partida:

Listagem de jogos em andamento ou com in√≠cio pr√≥ximo (conforme disponibilidade da API football.api-sports).

Sele√ß√£o de uma partida espec√≠fica pelo usu√°rio.

Mensagem de confirma√ß√£o de gasto de cr√©dito ao escolher um jogo pela primeira vez para an√°lise.

Sistema de Cr√©ditos (V1.1 Aprimorado):

Cada sess√£o de an√°lise de partida consome 1 cr√©dito. O cr√©dito √© debitado na primeira vez que o bot precisa consultar uma API externa (football.api-sports ou IA) para a partida selecionada.

Usu√°rio recebe X cr√©ditos iniciais (a definir, ex: no onboarding ou um limite di√°rio).

Aviso de consumo de cr√©dito antes de iniciar a an√°lise (se for a primeira vez para aquele jogo).

Contagem de cr√©ditos gerenciada no Supabase.

Permitir retornar a uma an√°lise de partida j√° iniciada (e com cr√©dito j√° consumido) sem novo custo, enquanto a partida estiver ativa ou relevante.

Consumo da API football.api-sports para obter estat√≠sticas detalhadas do jogo selecionado.

Formula√ß√£o de prompt otimizado e chamada √† API de IA (Gemini ou ChatGPT) com:

Estat√≠sticas do jogo atual.

Contexto do hist√≥rico recente das equipes (ex: n√∫mero de jogos recentes, poss√≠vel fadiga).

Opcionalmente, contexto do usu√°rio (ex: perfil de risco, meta).

Apresenta√ß√£o da an√°lise da IA no WhatsApp, incluindo:

Breve overview da situa√ß√£o do jogo e das estat√≠sticas chave.

Recomenda√ß√£o de aposta (se a IA identificar oportunidade, com base em padr√µes).

Lembrete sobre gest√£o de banca e controle emocional.

Finalizar com uma pergunta guiada para o usu√°rio interagir com base na an√°lise (ex: "Com base nisso, voc√™ gostaria de saber mais sobre as chances de gols para o Time A ou as estat√≠sticas de posse de bola?").

3.7. Intera√ß√£o P√≥s-An√°lise:

Permitir que o usu√°rio fa√ßa perguntas contextuais sobre a partida analisada.

Mecanismo para manter o foco no jogo selecionado; se o usu√°rio desviar o assunto, o bot deve gentilmente sugerir voltar ao menu ou focar na an√°lise atual.

Se o usu√°rio sair da an√°lise de um jogo em andamento: avisar que o cr√©dito para aquele jogo j√° foi utilizado e confirmar se ele tem certeza, informando o tempo restante aproximado do jogo.

3.8. Retorno ao Menu / Novas An√°lises:

Ap√≥s a intera√ß√£o, ou a qualquer momento, o usu√°rio pode solicitar voltar ao menu.

Se o usu√°rio estava analisando um jogo e retorna ao menu antes do t√©rmino, o sistema deve perguntar: "Como foram suas apostas nesse jogo? Isso nos ajuda a entender seu progresso." (Registrar resposta de forma simplificada).

O jogo que estava em an√°lise (e teve cr√©dito consumido) deve ser marcado no menu para que o usu√°rio possa retornar a ele sem custo adicional enquanto relevante.

3.9. Agente de Controle de Perdas:

O sistema deve monitorar o n√∫mero de perdas consecutivas reportadas pelo usu√°rio (ou inferidas).

Se um n√∫mero X de perdas seguidas for atingido (a definir), o bot enviar√° uma mensagem proativa: "Percebi que voc√™ teve algumas perdas seguidas. Que tal fazer uma pausa por hoje e voltar mais tarde com a mente fresca? Lembre-se, o controle emocional √© fundamental!"

3.10. Notifica√ß√µes de Times Favoritos:

O sistema poder√° (a depender da complexidade e prioridade para V1.1) enviar um follow-up/notifica√ß√£o quando um dos times favoritos do usu√°rio tiver um jogo prestes a come√ßar ou em andamento, sugerindo uma an√°lise.

3.11. Alertas e Mensagens do Sistema:

Aviso se um jogo selecionado for muito recente e ainda n√£o possuir estat√≠sticas suficientes na API.

Mensagem informativa se n√£o houver jogos das ligas principais dispon√≠veis no momento da consulta.

Tratamento b√°sico de erros na comunica√ß√£o com APIs externas (esportes, IA), informando o usu√°rio sobre instabilidades.

3.12. Documenta√ß√£o T√©cnica:

Breve manual de configura√ß√£o dos fluxos n8n.

Descri√ß√£o das tabelas e estrutura no Supabase.

3.13. Fora do Escopo (O que N√ÉO EST√Å INCLU√çDO na V1.1 e ser√° considerado EXTRA):

Aten√ß√£o: Qualquer funcionalidade n√£o explicitamente listada nas "Entregas Principais da V1.1", ou qualquer desvio ou adi√ß√£o ao escopo aqui definido, ser√° considerada um item extra e or√ßada separadamente.

Integra√ß√£o com plataformas de apostas para realiza√ß√£o autom√°tica de apostas.

An√°lise de outros esportes al√©m do futebol.

Sistema de pagamento para compra de cr√©ditos.

4. Processo / Workflow Proposto (Vis√£o Geral da Intera√ß√£o do Usu√°rio)
4.1. Primeiro Contato / Onboarding:

Usu√°rio envia mensagem inicial para o n√∫mero do taticacerta.AI no WhatsApp.

Bot responde com mensagem de boas-vindas e inicia o fluxo de onboarding (coleta de banca, meta, prazo, perfil de risco e times favoritos).

Bot calcula e apresenta stake sugerida e total de apostas di√°rias.

Dados s√£o salvos no Supabase. Bot apresenta o menu principal.

4.2. Navega√ß√£o e Sele√ß√£o de Jogo:

Usu√°rio interage com o menu para ver jogos.

Bot busca jogos na football.api-sports e os exibe, indicando os que podem ser retomados.

Usu√°rio seleciona um jogo.

4.3. An√°lise e Intera√ß√£o:

Bot verifica cr√©ditos. Se for a primeira an√°lise para o jogo, informa sobre o consumo e pede confirma√ß√£o (se aplic√°vel), debitando o cr√©dito.

Ao confirmar (ou se j√° tiver cr√©dito debitado para esse jogo), bot busca estat√≠sticas (considerando hist√≥rico/contexto), chama a IA e apresenta a an√°lise (overview + pergunta guiada).

Usu√°rio pode fazer perguntas contextuais sobre a an√°lise.

Agente de controle de perdas monitora e interv√©m se necess√°rio.

4.4. Retorno ao Menu / Novas An√°lises:

Ap√≥s a intera√ß√£o, ou a qualquer momento, o usu√°rio pode solicitar voltar ao menu.

Se estava em uma an√°lise, pergunta sobre as apostas feitas.

O usu√°rio pode escolher outro jogo (consumindo novo cr√©dito se for o primeiro acesso √†quele jogo) ou retornar a um jogo j√° analisado (sem novo custo).

5. Tecnologias e Ferramentas (V1.1)
Orquestra√ß√£o da Automa√ß√£o: N8N (inst√¢ncia do cliente ou nova a ser configurada).

Comunica√ß√£o WhatsApp: Evolution API (inst√¢ncia gerenciada pelo cliente ou a ser configurada).

Intelig√™ncia Artificial (IA): Google Gemini ou OpenAI ChatGPT.

Prefer√™ncia a ser definida com o cliente.

Justificativa da Flexibilidade: Permite escolher o modelo que melhor se adequar em termos de custo, qualidade da resposta para o caso de uso (incluindo an√°lise contextual) e facilidade de integra√ß√£o.

Fonte de Dados Esportivos (Futebol): football.api-sports (API Key e plano de uso sob responsabilidade do cliente).

Banco de Dados: Supabase (PostgreSQL gerenciado).

Justificativa: Facilidade de configura√ß√£o, APIs REST/GraphQL autom√°ticas, tier gratuito generoso para MVP, escalabilidade.

6. Requisitos Funcionais e N√£o Funcionais Chave (V1.1)
6.1. Requisitos Funcionais:

O sistema deve interagir com o usu√°rio exclusivamente via WhatsApp (Evolution API).

Deve coletar e usar informa√ß√µes de banca, meta, prazo e perfil de risco para calcular e sugerir stake e total de apostas di√°rias, persistindo esses dados no Supabase.

Deve coletar e armazenar times favoritos do usu√°rio.

Deve buscar (via football.api-sports) e apresentar jogos de futebol de ligas pr√©-definidas, indicando jogos em tempo real.

Deve consumir dados detalhados da partida da football.api-sports.

Deve integrar com a API de IA (Gemini ou ChatGPT) para gerar an√°lises contextuais (hist√≥rico de equipes, etc.) e recomenda√ß√µes.

A IA deve iniciar a an√°lise com um overview e uma pergunta para guiar a intera√ß√£o.

Deve apresentar as an√°lises de forma clara e estruturada no WhatsApp.

Deve permitir a atualiza√ß√£o da lista de jogos sob demanda.

Deve gerenciar o fluxo da conversa, mantendo o foco na an√°lise atual ou redirecionando ao menu.

Deve gerenciar um sistema de cr√©ditos de an√°lise, com d√©bito no primeiro uso de API externa para um jogo e permitir retorno sem novo custo.

Deve permitir ao usu√°rio retornar a uma an√°lise de jogo em andamento sem consumir novo cr√©dito.

Deve implementar um agente de controle de perdas que alerta o usu√°rio ap√≥s X perdas consecutivas.

Deve perguntar sobre o resultado das apostas quando o usu√°rio sai de uma an√°lise de jogo.

Opcional/Desej√°vel: Deve notificar usu√°rios sobre jogos de seus times favoritos.

6.2. Requisitos N√£o Funcionais:

Usabilidade: Interface conversacional intuitiva e com respostas r√°pidas.

Performance: Tempo de resposta aceit√°vel para um chatbot, considerando as lat√™ncias das m√∫ltiplas APIs envolvidas.

Confiabilidade: Tratamento b√°sico de erros e comunica√ß√£o clara sobre indisponibilidades.

Seguran√ßa: Prote√ß√£o das chaves de API e dados do usu√°rio armazenados.

Personaliza√ß√£o: O sistema deve adaptar suas sugest√µes e intera√ß√µes com base nos dados e perfil do usu√°rio.

7. Quest√µes em Aberto e Decis√µes Pendentes para V1.1
Escolha da IA: Cliente precisa definir a prefer√™ncia entre Google Gemini e OpenAI ChatGPT.

Lista de Ligas Principais: Cliente deve fornecer a lista inicial de ligas de futebol a serem cobertas.

Sistema de Cr√©ditos:

Definir a quantidade de cr√©ditos iniciais/di√°rios para o usu√°rio na V1.1.

Agente de Controle de Perdas:

Definir o n√∫mero de perdas consecutivas (X) que aciona o alerta.

Conte√∫do e Tom da IA: Alinhar o tom de comunica√ß√£o da IA (mais formal, informal, anal√≠tico, etc.) e exemplos de prompts/respostas, especialmente para a an√°lise contextual e perguntas guiadas.

Especifica√ß√µes da Inst√¢ncia N8N e Evolution API: Definir requisitos de hospedagem (VPS ou outro) se o cliente n√£o possuir.

Formato Detalhado das Mensagens: Definir o layout exato das mensagens de menu, an√°lise, alertas, onboarding, etc. (pode ser feito iterativamente).

Prioridade da Notifica√ß√£o de Times Favoritos: Confirmar se entra integralmente na V1.1 ou se uma vers√£o simplificada/MVP √© suficiente.

8. Cronograma Preliminar e Marcos (V1.1)
(Nota: Os prazos s√£o estimativas e podem precisar de revis√£o com base na complexidade adicionada. A estrutura de fases da V1 √© mantida como refer√™ncia.)

Fase 1: Configura√ß√£o e Acesso √†s Plataformas e APIs (Cliente e Desenvolvedor) - [Estimativa: 1-2 dias]

Marco: Todas as plataformas e APIs acess√≠veis, configuradas e testadas.

Fase 2: Desenvolvimento Fluxo de Onboarding (Avan√ßado) e Menu Principal com Integra√ß√£o Supabase - [Estimativa: 4-5 dias]

Marco: Usu√°rio completa onboarding (banca, meta, prazo, perfil, times), dados salvos, stake calculada, menu principal funcional.

Fase 3: Desenvolvimento Fluxo de An√°lise de Jogo com IA Contextual, Supabase, Cr√©ditos e Retorno - [Estimativa: 4-6 dias]

Marco: Usu√°rio seleciona jogo, cr√©dito √© gerenciado, IA fornece an√°lise contextual, pode retornar ao jogo.

Fase 4: Desenvolvimento Agente de Controle de Perdas e Funcionalidades Adicionais (Times Favoritos, Feedback de Aposta) - [Estimativa: 2-3 dias]

Marco: Agente de perdas funcional, feedback de apostas e notifica√ß√µes de times favoritos implementados.

Fase 5: Testes Integrados e Ajustes - [Estimativa: 7-10 dias]

Marco: Fluxos V1.1 testados de ponta a ponta e aprovados.

Fase 6: Entrega e Documenta√ß√£o B√°sica - [Estimativa: 2 dias]

Marco: Projeto V1.1 entregue com documenta√ß√£o.

9. Crit√©rios de Aceita√ß√£o (V1.1)
O usu√°rio consegue completar o fluxo de onboarding (banca, meta, prazo, perfil de risco, times favoritos) via WhatsApp, com dados devidamente persistidos, stake calculada e recuperados do Supabase.

O menu principal √© exibido corretamente, as op√ß√µes s√£o funcionais (incluindo indica√ß√£o de jogos retorn√°veis) utilizando a Evolution API.

A lista de jogos das ligas principais definidas √© carregada e atualizada corretamente, com aviso de "jogos em tempo real".

O usu√°rio consegue selecionar um jogo, o sistema de cr√©ditos √© debitado corretamente (na primeira consulta externa), e uma an√°lise contextual da IA escolhida √© recebida no WhatsApp, iniciando com overview e pergunta.

O usu√°rio pode retornar a uma an√°lise de jogo em andamento sem consumir novo cr√©dito.

O agente de controle de perdas envia alertas apropriados ap√≥s um n√∫mero definido de perdas.

O sistema solicita feedback sobre apostas ao sair de uma an√°lise.

O sistema trata adequadamente casos como "jogo sem estat√≠sticas suficientes" ou "nenhum jogo dispon√≠vel".

As intera√ß√µes s√£o orquestradas pelo n8n, integrando todas as APIs.

Os fluxos n8n est√£o organizados.

A estrutura das tabelas no Supabase est√° funcional e armazena todos os novos campos.

(Opcional, se priorizado) Notifica√ß√µes de times favoritos s√£o enviadas.

10. Pr√≥ximos Passos para In√≠cio do Projeto
Revis√£o e Aprova√ß√£o deste Documento de Escopo do Projeto (Vers√£o 1.1) pelo cliente.

Defini√ß√£o das "Quest√µes em Aberto" listadas na se√ß√£o 7.
